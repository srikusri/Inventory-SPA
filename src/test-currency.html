<!DOCTYPE html>
<html>
<head>
    <title>Currency Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #5568d3;
        }
        .output {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .currency-display {
            font-size: 2rem;
            font-weight: bold;
            color: #28a745;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üí± Currency Feature Test</h1>
    
    <div class="test-section">
        <h2>Current Currency Status</h2>
        <div id="current-currency" class="currency-display">Loading...</div>
        <button onclick="checkCurrency()">Refresh Currency</button>
    </div>

    <div class="test-section">
        <h2>Test Currency Change</h2>
        <button onclick="setCurrency('USD')">Set to USD ($)</button>
        <button onclick="setCurrency('EUR')">Set to EUR (‚Ç¨)</button>
        <button onclick="setCurrency('GBP')">Set to GBP (¬£)</button>
        <button onclick="setCurrency('INR')">Set to INR (‚Çπ)</button>
        <button onclick="setCurrency('JPY')">Set to JPY (¬•)</button>
        <div id="currency-output" class="output"></div>
    </div>

    <div class="test-section">
        <h2>Format Test</h2>
        <button onclick="formatAmount(100)">Format $100</button>
        <button onclick="formatAmount(1234.56)">Format $1234.56</button>
        <button onclick="formatAmount(0.99)">Format $0.99</button>
        <div id="format-output" class="output"></div>
    </div>

    <div class="test-section">
        <h2>Open Main App</h2>
        <button onclick="window.location.href='http://localhost:8080'">Go to App</button>
        <button onclick="openSettings()">Instructions</button>
    </div>

    <script>
        const AVAILABLE_CURRENCIES = [
            { code: 'USD', symbol: '$', name: 'US Dollar', position: 'before' },
            { code: 'EUR', symbol: '‚Ç¨', name: 'Euro', position: 'before' },
            { code: 'GBP', symbol: '¬£', name: 'British Pound', position: 'before' },
            { code: 'INR', symbol: '‚Çπ', name: 'Indian Rupee', position: 'before' },
            { code: 'JPY', symbol: '¬•', name: 'Japanese Yen', position: 'before' }
        ];

        function checkCurrency() {
            const saved = localStorage.getItem('kids_currency');
            const currencyCode = saved || 'USD';
            const currency = AVAILABLE_CURRENCIES.find(c => c.code === currencyCode) || AVAILABLE_CURRENCIES[0];
            
            document.getElementById('current-currency').textContent = 
                `${currency.symbol} ${currency.name} (${currency.code})`;
        }

        function setCurrency(code) {
            localStorage.setItem('kids_currency', code);
            const currency = AVAILABLE_CURRENCIES.find(c => c.code === code);
            const output = document.getElementById('currency-output');
            output.textContent = `‚úÖ Currency set to: ${currency.symbol} ${currency.name} (${currency.code})\n\nNow refresh the main app to see the changes!`;
            checkCurrency();
        }

        function formatAmount(amount) {
            const saved = localStorage.getItem('kids_currency');
            const currencyCode = saved || 'USD';
            const currency = AVAILABLE_CURRENCIES.find(c => c.code === currencyCode) || AVAILABLE_CURRENCIES[0];
            
            const formatted = amount.toFixed(2);
            const result = currency.position === 'before' 
                ? `${currency.symbol}${formatted}` 
                : `${formatted}${currency.symbol}`;
            
            document.getElementById('format-output').textContent = 
                `Amount: ${amount}\nFormatted: ${result}\nCurrency: ${currency.code}`;
        }

        function openSettings() {
            alert(`üìã To see currency selection in the main app:

1. Go to http://localhost:8080
2. Click the ‚öôÔ∏è Settings icon (top-right corner)
3. Look for the "üí± Currency" section
4. It should be between "üîä Sound" and "üìä Your Progress"

If you don't see it:
- Try hard refresh: Ctrl+Shift+R (Windows) or Cmd+Shift+R (Mac)
- Check browser console (F12) for errors
- Clear browser cache`);
        }

        // Auto-check on load
        window.onload = checkCurrency;
    </script>
</body>
</html>

